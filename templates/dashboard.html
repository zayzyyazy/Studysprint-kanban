{% extends "base.html" %}

{% block title %}Dashboard â€“ StudySprint{% endblock %}

{% block content %}
<section class="page-header">
  <h1>My Study Dashboard</h1>
  <p class="subtitle">Track your progress across all subjects.</p>
</section>

<section class="focus-section">
  <h2 class="focus-section__title">ðŸ”¥ Focus Now</h2>
  {% if focus_topics %}
  <ul class="focus-list">
    {% for t in focus_topics %}
    <li class="focus-item">
      <span class="focus-item__title">{{ t.title }}</span>
      <span class="focus-item__sep">â€”</span>
      <span class="focus-item__subject">{{ t.subject_name[:10] }}{% if t.subject_name|length > 10 %}â€¦{% endif %}</span>
      <span class="focus-item__sep">â€”</span>
      <span class="focus-item__pct">{{ t.completion }}%</span>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="focus-empty">No active topics yet.</p>
  {% endif %}
</section>

{% if subjects %}
<div class="subject-grid">
  {% for subj in subjects %}
  <a href="{{ url_for('subject', subject_id=subj.id) }}" class="subject-card">
    <div class="subject-card__header">
      <h2 class="subject-card__name">{{ subj.name }}</h2>
      <span class="subject-card__count">{{ subj.topic_count }} topic{% if subj.topic_count != 1 %}s{% endif %}</span>
    </div>

    <div class="subject-card__pct">{{ subj.overall_completion }}%</div>

    <div class="progress-track">
      <div class="progress-fill" style="width: {{ subj.overall_completion }}%"></div>
    </div>

    <span class="subject-card__cta">View Board &rarr;</span>
  </a>
  {% endfor %}
</div>
{% else %}
<p class="empty-state">No subjects yet â€” add one below to get started.</p>
{% endif %}

<section class="add-panel">
  <h2 class="add-panel__title">Add Subject</h2>
  <form method="POST" action="{{ url_for('add_subject') }}" class="add-form">
    <input
      type="text"
      name="name"
      placeholder="e.g. Mathematics"
      required
      class="form-input"
      autocomplete="off"
    />
    <button type="submit" class="btn btn--primary">+ Add Subject</button>
  </form>
</section>
{% endblock %}
